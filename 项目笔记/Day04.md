# 逻辑实现：

## 将书分页展示，并且实现上一页下一页功能

首先，我们需要知道实现这个需求需要做哪些。分页展示实际上就是在数据库取数据的时候加以了限制，也就是limit关键字。再展示到页面里实现了分页的效果。而上一页下一页我们实际上在js里做了一个跳转。开发流程仍需遵循MVC模式，通过Sevle处理来自前端的请求到Service取数据，Service去找Repository要数据，Repository再去底层数据库取数据，完后再给Sevlet，由Servlet转交给前端页面。

- 分页原理：limit关键字，前后两个参数，前面是位置，后面是长度。从0开始。我们定义为index和limit。
  - 从最底层的BookRepository的实现类入手，需要两个参数，我们就给他传入index和limit两个参数。更改SQL语句，传入参数。
  - 在BookRepository的接口函数定义也定义成带参数的。
  - 在BookSevelet中拿到当前页数page，转成整型。
  - 往下传，我们还得改BookService实现类的findAll方法，把当前页数传进来，同理在接口中的定义也要改。
  - 并且，我们需要将页数转换成我们想要的两个参数index和limit（index = (page-1)*LIMIT）LIMIT是我们在这里写死了每页就展示6本书。
  - 然后再到BookSevlet中复写类似于LoginServlet的代码即可。
  - 到这里我们就实现了分页展示。
- 测试：手动传参，加断点。
  - ![image-20200602205922285](https://img.99couple.top/20200602205922.png)
  - 可以看到确实拿到了指定页码的书的信息
  - ![image-20200602210019103](https://img.99couple.top/20200602210019.png)
- 实现上一页下一页
  - 实现此功能我们需要总页数
    - 先从数据库count出总本数，在BookRepository跟数据库交互的过程中取出来。
    - 再根据LIMIT去计算出总本数。我们将这一步封装成getPages方法，定义在BookService实现类中。
  - 每页多少条我们还是写死的，所以重点放到了js实现，我们需要根据当前页数，总页数的关系，对page参数进行变换达到下一页跳转的功能。
  - 还需要注意不能超过总页数，同理实现上一页，不能小于1。以上代码均在index.jsp的js语句中实现。
  - 同理首页末页。至此实现所有功能。
- 测试：实现上一页下一页跳转
  - ![image-20200602210403626](https://img.99couple.top/20200602210403.png)